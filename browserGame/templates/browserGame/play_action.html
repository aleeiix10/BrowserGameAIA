{% extends 'base.html' %}
{% load static %}
{% load render_bundle from webpack_loader %}
{% block title %} Play Action {% endblock %}
{% block content %}
{% include 'header.html' with title="Play-Action" %}
{% include 'navbar.html' %}
<!-- {{lvl|safe}} -->

<style>
    .drop-up-container {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: max-content;
    z-index: 9999;
  }

  .drop-up-content {
    display: none;
    position: absolute;
    bottom: 100%;
    transform: translateX(-50%);
    width: 300px;
    padding: 10px;
    background-color: #1a202c;
    color: #f7fafc;
    border-radius: 4px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  }
  .drop-up-arrow {
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    border-bottom: 6px solid #1a202c;
  }

  /* Reglas de estilo para pantallas m치s peque침as */
  @media only screen and (max-width: 640px) {
    .drop-up-container {
      right: 10px;
      width: calc(100% - 20px);
      max-width: 400px;
    }
  }

  /* Estilos para la ventana emergente en modo expandido */
  .drop-up-content.expanded {
    width: 100%;
    height: 100%;
    bottom: 0;
    top: 0;
    left: 0;
    right: 0;
    transform: none;
    border-radius: 0;
  }

  .drop-up-arrow.expanded {
    display: none;
  }

  .drop-up-content.expanded p {
    margin-bottom: 20px;
  }

  /* Estilos para el asa de redimensionamiento */
  .resize-handle {
    position: absolute;
    top: -8px;
    left: -8px;
    width: 16px;
    height: 16px;
    cursor: nwse-resize;
    background-color: #fff;
    border: 2px solid #1a202c;
    border-radius: 50%;
  }
</style>

{{msg|safe}}
<div class="flex flex-col items-center mt-8" id="formulario">
    <h2 class="text-2xl font-bold mb-4">Selecciona una acci칩</h2>
    <form method="post" class="bg-green-300 p-4 rounded-lg w-96" autocomplete="off">
        {% csrf_token %}
        <div class="mb-4">
            <label for="{{ form.accio.id_for_label }}" class="block text-white font-bold mb-2">Acci칩:</label>
            {{form.button_choice}}
        </div>
        <div class="mb-4">
            <label for="{{ form.jugador_a_atacar.id_for_label }}" class="block text-white font-bold mb-2">Jugador a atacar</label>
            {{ form.jugador_a_atacar }}
        </div>
        <input type="submit" name="submit" class="bg-green-700 text-white font-bold py-2 px-4 rounded-full w-full" id="btnSubmit">
    </form>
</div>
{% include 'dropup.html' %}
<script>
    $(document).ready(function(){

        $("#id_action").first().val("selected")
        $(".btn-alert").click(function (){
            $(".btn-alert").parent().remove()
            
        })

        const openButton = $('#openButton');
        const modal = $('#modal');
  
        let isOpen = false;
  
        
        $("#modal").draggable().resizable({
          handles: "n, w",
          minWidth: 300,
          minHeight: 100,
          resize: function(event, ui) {
            var originalWidth = ui.originalSize.width;
            var originalHeight = ui.originalSize.height;
            var currentWidth = ui.size.width;
            var currentHeight = ui.size.height;

            if (currentWidth < originalWidth || currentHeight < originalHeight) {
              $(this).resizable("option", "minWidth", originalWidth);
              $(this).resizable("option", "minHeight", originalHeight);
            }
          }
    });

      // Abrir y cerrar la ventana modal
      openButton.click(function() {
        $("#modal").toggle();
      });
    })
</script>
{% endblock %}
